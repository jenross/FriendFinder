<!DOCTYPE html>
<html lang="en-us" class="h-100">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="Which character from 'The Good Place' are you most like? Fill out the survey to find out!">
    <meta name="author" content="Jennifer Ross">
    <title>"Good Friend" Finder Survey</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Lato:700&display=swap" rel="stylesheet">
</head>
<body class="d-flex flex-column h-100">
    <style>
        body {
            font-family: 'Lato', sans-serif;
            background: url('https://images.unsplash.com/photo-1531685250784-7569952593d2?ixlib=rb-1.2.1&auto=format&fit=crop&w=1334&q=80') no-repeat center fixed;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
            color: green;
        }

        h1, h2 { 
            font-size: 75px; 
        }

        .footer-links {
            color: green; 
        }

        .footer-links:hover {
            text-decoration: none; 
            color: grey; 
        }

        .jumbotron {
            height: auto; 
            width: auto; 
            opacity: 0.8; 
        }

        .btn-primary {
            background-color: green;
            border: green;   
        }

        .btn-primary:hover {
            background-color: darkgreen; 
        }

        label {
            font-size: 25px; 
        }

        .header {
            font-size: 35px; 
        }

        h3, h4 {
            font-size: 20px; 
        }

        input[type=text]{
            -webkit-appearance: none;

            width: 100%;
            border: 1px solid #333;
            margin: 0;

            font-family: inherit;
            font-size: 90%;
        }

            /* This is our style for the invalid fields */
        input:invalid{
            border-color: #900;
            background-color: #FDD;
        }

        input:focus:invalid {
            outline: none;
        }

            /* This is the style of our error messages */
        .error, .error-photo, .error-q {
            width  : 100%;
            padding: 0;
            
            font-size: 80%;
            color: white;
            background-color: #900;
            border-radius: 0 0 5px 5px;
        }

        .error.active {
            padding: 0.3em;
        }

        .error-photo.active {
            padding: 0.3em;
        }

        .error-q.active {
            padding: 0.3em;
        }

        .friend-img {
            max-width: 700px;
            max-height: 500px; 
        }

        .friend-name {
            font-size: 25px; 
            color: green; 
        }

        h5 {
            font-size: 45px; 
        }

        /* .modal {
            width: auto;
            height: auto; 
        } */
    </style>

    <main role="main" class="flex-shrink-0">
        <div class="row">

                <div class="col-12">
        
                <div class="card">
                    <div class="card-header">
                    <h3 class="header text-center"><strong><i>"Good Friend"</i> 	&nbsp;Finder</strong></h3>
                    </div>
                    <div class="card-body">
                    <form method="POST" role="form">
                        
                        <h3 class="header"><strong>About You</strong></h3>
                        <hr class="mt-3">
                        <div class="form-group">

                            <label class="mt-2 d-block" for="name">
                                <span>Name (required)</span>
                                <input type="text" class="form-control" id="name" required>
                                <span class="error" aria-live="polite"></span>
                            </label>

                            <label class="mt-2 d-block" for="photo">
                                <span>Link to Photo (required)</span>
                                <input type="text" class="form-control" id="photo" required>
                                <span class="error-photo" aria-live="polite"></span>
                            </label>

                        </div>
        
                        <h3 class="mt-4 py-2"><strong>1. You’ve never met a shrimp you didn’t like.</strong></h3>
                        <select name="answer-choices" id="question-1" class="selections" required>
                            <option value=""><span>Select an option</span></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h3 class="mt-4 py-2"><strong>2. The Jacksonville Jaguars are the greatest football team of all time!</strong></h3>
                        <!-- <h4 class="py-2">The Jacksonville Jaguars are the greatest football team of all time!</h4> -->
                        <select name="answer-choices" id="question-2" class="selections" required>
                            <option value=""><span>Select an option</span></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h3 class="mt-4 py-2"><strong>3. Any place or thing in the universe can be up to 104% perfect. That’s how we got Beyoncé.</strong></h3>
                        <!-- <h4 class="py-2">Any place or thing in the universe can be up to 104% perfect. That’s how we got Beyoncé.</h4> -->
                        <select name="answer-choices" id="question-3" class="selections" required>
                            <option value=""><span>Select an option</span></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h3 class="mt-4 py-2"><strong>4. There’s no problem a Molotov cocktail can’t solve.</strong></h3>
                        <!-- <h4 class="py-2">There’s no problem a Molotov cocktail can’t solve.</h4> -->
                        <select name="answer-choices" id="question-4" class="selections" required>
                            <option value=""><span>Select an option</span></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h3 class="mt-4 py-2"><strong>5. Why stay silent when you can name-drop famous celebs you’ve brushed shoulders with at your Heir B&B?</strong></h3>
                        <!-- <h4 class="py-2">Why stay silent when you can name-drop famous celebs you’ve brushed shoulders with at your Heir B&B?</h4> -->
                        <select name="answer-choices" id="question-5" class="selections" required>
                            <option value=""><span>Select an option</span></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h3 class="mt-4 py-2"><strong>6. “Ya basic!” is one of your favorite insults.</strong></h3>
                        <!-- <h4 class="py-2">“Ya basic!” is one of your favorite insults.</h4> -->
                        <select name="answer-choices" id="question-6" class="selections" required>
                            <option value=""><span>Select an option</span></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h3 class="mt-4 py-2"><strong>7. The only thing you experience more frequently than stomachaches is a paralyzing inability to make decisions about...well, anything.</strong></h3>
                        <!-- <h4 class="py-2">The only thing you experience more frequently than stomachaches is a paralyzing inability to make decisions about...well, anything.</h4> -->
                        <select name="answer-choices" id="question-7" class="selections" required>
                            <option value=""><span>Select an option</span></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h3 class="mt-4 py-2"><strong>8. You’d probably make a pretty hot centaur.</strong></h3>
                        <!-- <h4 class="py-2">You’d probably make a pretty hot centaur.</h4> -->
                        <select name="answer-choices" id="question-8" class="selections" required>
                            <option value=""><span>Select an option</span></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h3 class="mt-4 py-2"><strong>9. Your soul mates are John Locke, Kierkegaard, and...books. Lots of books.</strong></h3>
                        <!-- <h4 class="py-2">Your soul mates are John Locke, Kierkegaard, and...books. Lots of books.</h4> -->
                        <select name="answer-choices" id="question-9" class="selections" required>
                            <option value=""><span>Select an option</span></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h3 class="mt-4 py-2"><strong>10. A daunting, impossible challenge awaits? Sign me up!</strong></h3>
                        <!-- <h4 class="py-2">A daunting, impossible challenge awaits? Sign me up!</h4> -->
                        <select name="answer-choices" id="question-10" class="selections" required>
                            <option value=""><span>Select an option</span></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
        
                    </form>
                    <br>
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary btn-md" id="add-btn"><span class="fa fa-fire"></span> Submit</button>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <div class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-xl text-center" role="document">
              <div class="modal-content text-center">
                <div class="modal-header text-center">
                  <h5 class="modal-title"><i>"Good Friend"</i> &nbsp;Found!</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body text-center">
                  <p class="friend-name"></p>
                  <img class="friend-img">
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <footer role="contentinfo" class="footer mt-auto mx-auto py-3">
        <div class="container">
            <p>
            <a href="/api/friends" class="footer-links">API "Good Friends" List</a> | <a href="https://github.com/jenross/FriendFinder" target="_blank" class="footer-links">GitHub Repo</a>
            </p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script type="text/javascript">
        
        const name = document.getElementById('name');
        const photoLink = document.getElementById('photo');
        const error = document.querySelector('.error');
        const errorPhoto = document.querySelector('.error-photo');

        $("#add-btn").on("click", function (event) {
            if (name.validity.valid) {
                // In case there is an error message visible, if the field
                // is valid, we remove the error message.
                name.innerHTML = ""; // Reset the content of the message
                error.className = "error"; // Reset the visual state of the message
            }
            else {
                
                // If the field is not valid, we display a custom
                // error message.
                error.innerHTML = "What the fork? Where is your name?!?";
                error.className = "error active";
            }

            if (photoLink.validity.valid) {
                // In case there is an error message visible, if the field
                // is valid, we remove the error message.
                photoLink.innerHTML = ""; // Reset the content of the message
                errorPhoto.className = "error-photo"; // Reset the visual state of the message
            }
            else {
                
                // If the field is not valid, we display a custom
                // error message.
                errorPhoto.innerHTML = "Need a photo link, bench.";
                errorPhoto.className = "error-photo active";
            }

            if (name.validity.valid && photoLink.validity.valid) {
                match(); 
            }
        });

        function match() {
             
            let newFriend = {
            name: $("#name").val().trim(),
            photo: $("#photo").val().trim(),
            scores: [$("#question-1").val(), $("#question-2").val(), $("#question-3").val(), $("#question-4").val(), $("#question-5").val(), $("#question-6").val(), $("#question-7").val(), $("#question-8").val(), $("#question-9").val(), $("#question-10").val()]
            };
            console.log(newFriend.scores);
            console.log(newFriend);

            $.post("/api/friends", newFriend, function(data) {
                console.log("survey.html", data);
                console.log(data.name);
                console.log(data.photo);
                $(".friend-name").text(data.name);
                $(".friend-img").attr("src", data.photo);
                $(".modal").modal("toggle");
                $("#name").val("");
                $("#photo").val("");
                $(".selections").val("");
            });
        }
    </script>
    
</body>
</html>